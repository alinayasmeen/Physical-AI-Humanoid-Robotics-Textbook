# مینی پروجیکٹ 2: سینسر کیلیبریشن سیمولیٹر

**مدت**: 3-4 گھنٹے
**موڈیول**: موڈیول 2 - ڈیجیٹل ٹوئن
**ضروریات**: لیبز 1-3 مکمل، سیمولیٹڈ سینسرز اور ROS 2 ٹاپکس کی سمجھ

## جائزہ

متعدد روبوٹ سینسرز کو ٹیسٹ اور کیلیبریٹ کرنے کے لیے ایک سیمولیشن ماحول بنائیں. یہ پروجیکٹ موڈیول 2 سے سینسر کنفیگریشن، ڈیٹا پائپ لائن تصورات، اور توثیق کنیکیں کو ضم کرتا ہے، ایک اوزار تخلیق کرتا ہے جسے ڈیپلائمنٹ سے پہلے سینسر پیرامیٹر کو ٹیون کرنے کے لیے استعمال کیا جا سکتا ہے.

## اہداف

ایک سینسر کیلیبریشن سسٹم بنائیں جس میں:

- متعدد قابل کنفیگر سینسرز (کیمرہ، لیڈار، IMU)
- کیلیبریشن ٹارگٹس اور حوالہ اشیاء
- ڈیٹا جمع کرنے اور تجزیہ کے اوزار
- سینسر کی درستی کی توثیق اسکرپٹس
- ریل ٹائم کیلیبریشن کے لیے ROS 2 انٹیگریشن

## سسٹم معماری

```
┌─────────────────────────────────────────────────────────────────┐
│                 سینسر کیلیبریشن ماحول                   │
│                                                                  │
│  ┌─────────────────┐        ┌─────────────────┐                 │
│  │ کیلیبریشن       │        │ حوالہ           │                 │
│  │ ٹارگٹ بورڈ     │        │ اشیاء           │                 │
│  │ (چیکر بورڈ)    │        │ (معلوم سائز)    │                 │
│  └─────────────────┘        └─────────────────┘                 │
│                                                                  │
│           ┌─────────────────────────────┐                       │
│           │      سینسرز والے روبوٹ      │                       │
│           │  ┌───────┐ ┌───────┐ ┌───┐  │                       │
│           │  │کیمرہ │ │ لیڈار │ │IMU│  │                       │
│           │  └───────┘ └───────┘ └───┘  │                       │
│           └─────────────────────────────┘                       │
│                        │                                         │
│                        ▼                                         │
│           ┌─────────────────────────────┐                       │
│           │   کیلیبریشن نوڈ (ROS 2)    │                       │
│           │   - سینسر ڈیٹا جمع کریں    │                       │
│           │   - گراؤنڈ ٹروتھ سے موازنہ کریں  │                       │
│           │   - غلطی کے میٹرکس کا حساب کریں  │                       │
│           │   - کیلیبریشن جنریٹ کریں     │                       │
│           └─────────────────────────────┘                       │
└─────────────────────────────────────────────────────────────────┘
```

## ضروریات

### 1. کیلیبریشن ماحول

ایک کیلیبریشن ورلڈ (`calibration_room.sdf`) بنائیں جس میں:

**کیلیبریشن ٹارگٹس**:

- کیمرہ کیلیبریشن کے لیے چیکر بورڈ پیٹرن (1m x 1m)
- معلوم پوزیشنز پر فاصلہ مارکرز (1m، 2m، 3m، 5m)
- معلوم ابعاد کے ساتھ حوالہ کیوب (0.5m x 0.5m x 0.5m)

**ماحول کی خصوصیات**:

- صاف، اچھی طرح روشن انڈور ماحول
- فاصلہ گرڈ مارکنگز کے ساتھ فلیٹ فرش
- صاف سینسر پڑھاؤں کے لیے نیوٹرل رنگ والی دیواریں
- جامع ٹیسٹنگ کے لیے متعدد ٹارگٹ پوزیشنز

### 2. سینسر کنفیگریشن

قابل معمول پیرامیٹر کے ساتھ سینسرز کنفیگر کریں:

```yaml
# sensor_calibration_config.yaml
camera:
  resolution: [640, 480]
  fov: 1.047  # 60 ڈگری
  update_rate: 30
  noise:
    type: gaussian
    stddev: 0.02

lidar:
  samples: 360
  range_min: 0.1
  range_max: 10.0
  update_rate: 10
  noise:
    type: gaussian
    stddev: 0.01

imu:
  update_rate: 100
  noise:
    angular_velocity:
      stddev: 0.001
    linear_acceleration:
      stddev: 0.01
```

### 3. کیلیبریشن نوڈ

`sensor_calibrator.py` ROS 2 نوڈ بنائیں:

```python
# نوڈ کو چاہیے:
# 1. تمام سینسر ٹاپکس کو سبسکرائب کریں
# 2. کیلیبریشن ڈیٹا نمونے جمع کریں
# 3. پیمائش کو معلوم گراؤنڈ ٹروتھ سے موازنہ کریں
# 4. غلطی کے میٹرکس کا حساب کریں (RMSE، اوسط غلطی، معیاری انحراف)
# 5. کیلیبریشن رپورٹ جنریٹ کریں
```

### 4. توثیق کے ٹیسٹس

سینسر کی درستی کی توثیق کے لیے ٹیسٹس بنائیں:

**کیمرہ ٹیسٹس**:

- چیکر بورڈ کے کونوں کو ڈیٹیکٹ کریں
- FOV کوریج کی تصدیق کریں
- رنگ کی درستی ناپیں

**لیڈار ٹیسٹس**:

- معلوم ٹارگٹس تک فاصلہ ناپیں
- اسکین کوریج (360°) کی تصدیق کریں
- مختلف فاصلوں پر رینج کی درستی کا حساب کریں

**IMU ٹیسٹس**:

- گریویٹی ویکٹر (9.81 m/s²) کی تصدیق کریں
- جہت کی مستحکمی ٹیسٹ کریں
- وقت کے ساتھ ڈرائیف ناپیں

## شروع کریں

### ورک سپیس سیٹ اپ

```bash
cd ~/ros2_ws/src
ros2 pkg create --build-type ament_python sensor_calibration \
    --dependencies rclpy sensor_msgs geometry_msgs cv_bridge numpy
```

### اسٹارٹر فائلز

`starter/` ڈائریکٹری میں اسٹارٹر کوڈ استعمال کریں:

- `worlds/calibration_room_template.sdf` - ماحول ٹیمپلیٹ
- `config/sensor_config_template.yaml` - سینسر کنفیگریشن
- `sensor_calibration/calibrator_node.py` - کیلیبریشن نوڈ ٹیمپلیٹ
- `sensor_calibration/validation_tests.py` - ٹیسٹ اسکرپٹ ٹیمپلیٹ

### کیلیبریشن چلانا

```bash
# پیکج تعمیر کریں
colcon build --packages-select sensor_calibration

# کیلیبریشن ماحول لانچ کریں
ros2 launch sensor_calibration calibration.launch.py

# کیلیبریشن نوڈ چلائیں
ros2 run sensor_calibration calibrator_node

# توثیق کے ٹیسٹس چلائیں
ros2 run sensor_calibration validation_tests
```

## جائزہ کے معیار

| معیار | پوائنٹس |
|-----------|--------|
| ٹارگٹس کے ساتھ کیلیبریشن ماحول | 15 |
| کیمرہ کیلیبریشن کام کر رہی ہے | 20 |
| لیڈار کی درستی کی توثیق | 20 |
| IMU گریویٹی/جہت ٹیسٹ | 15 |
| غلطی کے میٹرکس درست طریقے سے حساب کیے گئے | 15 |
| کیلیبریشن رپورٹ جنریٹ کی گئی | 10 |
| صاف کوڈ اور دستاویزات | 5 |
| **کل** | **100** |

## توسیعات (بونس)

1. **انٹرایکٹو کیلیبریشن**: ریل ٹائم میں سینسر پیرامیٹر ایڈجسٹ کرنے کے لیے GUI
2. **ملٹی-سینسر فیوژن**: ایک دوسرے کے خلاف سینسرز کو کراس-توثیق کریں
3. **خودکار کیلیبریشن**: خودکار پیرامیٹر ٹیوننگ نافذ کریں
4. **کیلیبریشن ایکسپورٹ**: معیاری فارمیٹس (YAML، JSON) میں کیلیبریشن ڈیٹا محفوظ کریں
5. **درجہ حرارت سیمولیشن**: سیمولیٹڈ ٹیمپریچر تبدیلیوں کے ساتھ سینسر ڈرائیف ماڈل کریں
6. **نوائز کریکٹرائزیشن**: IMU کے لیے الین ویریئنس تجزیہ نافذ کریں

## اشارے

- چیکر بورڈ ڈیٹیکشن کے لیے OpenCV استعمال کریں (`cv2.findChessboardCorners`)
- گراؤنڈ ٹروتھ پوزیشنز کو کنفیگریشن فائل میں محفوظ کریں
- بہتر درستی کے لیے متعدد نمونے جمع کریں اور اوسط لیں
- احصائی حسابات کے لیے `numpy` استعمال کریں
- ٹائم-سیریز تجزیہ کے لیے ٹائم اسٹیمپس کے ساتھ ڈیٹا لاگ کریں
- ملٹی-سینسر موازنہ کے لیے سینسر سنکرونائزیشن پر غور کریں

## حل

مکمل نفاذ کے لیے `solution/` ڈائریکٹری دیکھیں جس میں شامل ہے:

- `worlds/calibration_room.sdf` - مکمل کیلیبریشن ماحول
- `config/sensor_config.yaml` - ٹیونڈ سینسر کنفیگریشن
- `sensor_calibration/calibrator_node.py` - کام کرتا ہوا کیلیبریشن نوڈ
- `sensor_calibration/validation_tests.py` - مکمل ٹیسٹ سویٹ

## کیلیبریشن رپورٹ فارمیٹ

آپ کا کیلیبریشن نوڈ اس طرح کی رپورٹ جنریٹ کرنا چاہیے:

```
=== سینسر کیلیبریشن رپورٹ ===
تاریخ: 2024-01-15 14:30:00
دورانیہ: 60 سیکنڈ
نمونے جمع کیے گئے: 600

--- کیمرہ کیلیبریشن ---
ریزولوشن: 640x480
چیکر بورڈ ڈیٹیکٹ ہوا: ہاں
ریپروجیکشن غلطی: 0.23 پکسلز
FOV ماپا گیا: 59.8° (متوقع: 60°)

--- لیڈار کیلیبریشن ---
رینج کی درستی (1m ٹارگٹ): 0.012m RMSE
رینج کی درستی (3m ٹارگٹ): 0.018m RMSE
رینج کی درستی (5m ٹارگٹ): 0.025m RMSE
اینگولر ریزولوشن: 1.0°
کوریج: 360°

--- IMU کیلیبریشن ---
گریویٹی کی مقدار: 9.807 m/s² (متوقع: 9.81)
جہت ڈرائیف: 0.02°/منٹ
ایکسلیرومیٹر نوائز: 0.008 m/s² std
جیروسکوپ نوائز: 0.0008 rad/s std

--- مجموعی حیثیت ---
کیمرہ: پاس
لیڈار: پاس
IMU: پاس
```

## ریفلیکشن سوالات

1. ریل ورلڈ میں روبوٹ ڈیپلائ کرنے سے پہلے سینسر کیلیبریشن کیوں اہم ہے؟
2. سیمولیٹڈ سینسر نوائز ماڈلز حقیقی سینسر نوائز خصوصیات سے کیسے موازنہ کرتے ہیں؟
3. آپ کو ایک ملٹی-کیمرہ سسٹم کے لیے کیا اضافی کیلیبریشن کی ضرورت ہوگی؟
4. آپ سینسر ٹائمِنگ/سنکرونائزیشن کو کیسے کیلیبریٹ کریں گے؟
5. سینسر کیلیبریشن کے لیے سیم-ٹو-ریل گیپ کیا ہے، اور اسے کیسے کم کیا جا سکتا ہے؟