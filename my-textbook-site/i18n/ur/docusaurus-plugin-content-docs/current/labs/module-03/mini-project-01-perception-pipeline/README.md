# مینی پروجیکٹ 1: مکمل پرچیپشن پائپ لائن

**موڈیول**: 3 - پرچیپشن اور سینسر
**مدت**: 3-4 گھنٹے
**پریشانی**: اعلی

## جائزہ

کیمرہ اور LiDAR ڈیٹا کو عمل کرنے والی ایک مکمل پرچیپشن پائپ لائن بنائیں جو 3D سپیس میں اشیاء کو ڈیٹیکٹ، ٹریک، اور لوکلائز کرتی ہے. یہ پروجیکٹ موڈیول 3 کے تمام تصورات کو ایک مربوط سسٹم میں ضم کرتا ہے.

## اہداف

اس مینی پروجیکٹ کو مکمل کرنے کے بعد، آپ:

1. کیمرہ اور LiDAR ڈیٹا اسٹریمز کو انٹیگریٹ کریں گے
2. 3D لوکلائزیشن کے ساتھ اوبجیکٹ ڈیٹیکشن نافذ کریں گے
3. اوبجیکٹ کی شناخت برقرار رکھنے والا ایک ٹریکنگ سسٹم بنائیں گے
4. نیچے کی طرف استعمال کنندگان کے لیے پرچیپشن نتائج شائع کریں گے

## ضروریات

- موڈیول 3 کی لیبز 1-5 مکمل
- کوآرڈینیٹ فریم ٹرانسفارمیشنز کی سمجھ
- ROS 2 میسج ٹائپس کی واقفیت

## سسٹم معماری

```
┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│   کیمرہ     │────▶│  ڈیٹیکٹر   │────▶│   ٹریکر    │
└─────────────┘     └─────────────┘     └─────────────┘
                           │                    │
                           ▼                    │
┌─────────────┐     ┌─────────────┐            │
│   LiDAR     │────▶│  3D فیوژن  │◀───────────┘
└─────────────┘     └─────────────┘
                           │
                           ▼
                    ┌─────────────┐
                    │  پبلشر     │──▶ /perception/objects
                    └─────────────┘
```

## ضروریات

### فنکشنل ضروریات

1. **ان پٹ پروسیسنگ**
   - `/camera/image_raw` کو سبسکرائب کریں (sensor_msgs/Image)
   - `/lidar/points` کو سبسکرائب کریں (sensor_msgs/PointCloud2)
   - 100ms ٹو لرنس کے اندر ان پٹ کو مطابقت دیں

2. **اوبجیکٹ ڈیٹیکشن**
   - YOLO یا اسی طرح کے ڈیٹیکٹر کا استعمال کرتے ہوئے اشیاء ڈیٹیکٹ کریں
   - یقین کی حد سے فلٹر کریں (>0.5)
   - غیر زیادہ سے زیادہ دباؤ کا اطلاق کریں

3. **3D لوکلائزیشن**
   - LiDAR پوائنٹس کو امیج کوآرڈینیٹس میں پروجیکٹ کریں
   - ڈیٹیکشنز کو پوائنٹ کلاؤڈ علاقوں کے ساتھ منسلک کریں
   - ہر ڈیٹیکشن کے لیے 3D سینٹرائیڈ کا حساب کریں

4. **ٹریکنگ**
   - فریموں کے درمیان اشیاء کو مسلسل IDز تفویض کریں
   - منظر سے اشیاء کے داخل ہونے/باہر نکلنے کو ہینڈل کریں
   - ٹریجکٹری تجزیہ کے لیے ٹریک کی تاریخ برقرار رکھیں

5. **آؤٹ پٹ**
   - `/perception/objects` پر شائع کریں (کسٹم میسج)
   - اس میں شامل کریں: کلاس، یقین، 3D پوزیشن، ٹریک_آئی ڈی، ویلوسٹی

### غیر فنکشنل ضروریات

- کم از کم 10 FPS پر عمل کریں
- ان پٹ سے آؤٹ پٹ تک 100ms سے کم دیری
- سینسر کی ناکامیوں کو باوقار طریقے سے ہینڈل کریں

## شروع کریں

### 1. ROS 2 پیکج بنائیں

```bash
cd ~/ros2_ws/src
ros2 pkg create perception_pipeline --build-type ament_python --dependencies rclpy sensor_msgs vision_msgs geometry_msgs
```

### 2. کسٹم میسج کی وضاحت کریں

`perception_msgs/msg/DetectedObject3D.msg` بنائیں:

```
std_msgs/Header header
string class_id
float32 confidence
geometry_msgs/Point position
geometry_msgs/Vector3 velocity
int32 track_id
float32 bbox_size_x
float32 bbox_size_y
float32 bbox_size_z
```

### 3. پائپ لائن نوڈز نافذ کریں

اسٹارٹر کوڈ ایک ڈھانچہ فراہم کرتا ہے. ٹوڈوز مکمل کریں:

- `perception_node.py` - مرکزی پائپ لائن کا انتظام
- `detector.py` - اوبجیکٹ ڈیٹیکشن ماڈیول
- `tracker.py` - ملٹی اوبجیکٹ ٹریکنگ
- `fusion.py` - کیمرہ-LiDAR فیوژن

## جائزہ کے معیار

توثیق اسکرپٹ چلائیں:

```bash
python3 validate.py
```

متوقع چیکس:

- [ ] پائپ لائن ضروری ٹاپکس کو سبسکرائب کرتی ہے
- [ ] ڈیٹیکشنز آؤٹ پٹ ٹاپک پر شائع کیے جاتے ہیں
- [ ] 3D پوزیشنز مناسب حدود کے اندر ہیں
- [ ] ٹریک IDز 10+ فریموں کے دوران مسلسل ہیں
- [ ] پروسیسنگ کی شرح >= 10 FPS
- [ ] 5 منٹ کے چلانے پر میموری لیکس نہیں

## ڈلیوریبلز

1. **کام کرتی ہوئی پائپ لائن**: `starter/` میں مکمل نفاذ
2. **ڈیمو ویڈیو**: اوبجیکٹ ٹریکنگ دکھانے والی 30 سیکنڈ کی ریکارڈنگ
3. **کارکردگی کی رپورٹ**: FPS، دیری، درستی کے میٹرکس
4. **دستاویزات**: سیٹ اپ ہدایات کے ساتھ README

## توسیع چیلنجز

1. **سیمینٹک سیگمینٹیشن**: ڈیٹیکشن کو سیگمینٹیشن کے ساتھ تبدیل کریں
2. **ویلوسٹی کا تخمینہ**: ٹریک کی تاریخ سے اوبجیکٹ ویلوسٹیز کا حساب کریں
3. **اوکلیوشن ہینڈلنگ**: عارضی اوکلیوشنز کے دوران پوزیشنز کی پیش گوئی کریں
4. **ملٹی کیمرہ**: متعدد کیمرہ مناظر کو ہینڈل کرنے کے لیے توسیع دیں

## وسائل

- [ROS 2 میسج فلٹرز دستاویزات](https://docs.ros.org/en/humble/Tutorials/Intermediate/Message-Filters.html)
- [vision_msgs پیکج](https://github.com/ros-perception/vision_msgs)
- [OpenCV DNN ماڈیول](https://docs.opencv.org/4.x/d2/d58/tutorial_table_of_content_dnn.html)