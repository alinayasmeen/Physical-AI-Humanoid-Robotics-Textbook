# مینی پروجیکٹ 1: روبوٹ ٹاکر سسٹم

**مدت**: 2-3 گھنٹے
**موڈیول**: موڈیول 1 - روبوٹک نروس سسٹم
**ضروریات**: لیبز 1-3 مکمل

## جائزہ

ایک ملٹی روبوٹ کمیونیکیشن سسٹم بنائیں جہاں روبوٹس ROS 2 ٹاپکس اور سروسز کا استعمال کرتے ہوئے اسٹیٹس کی معلومات کا تبادلہ کرتے ہیں. یہ پروجیکٹ موڈیول 1 کے تمام کمیونیکیشن تصورات کو ضم کرتا ہے.

## اہداف

ایک سسٹم بنائیں جس میں:

- متعدد روبوٹ اسٹیٹس پبلشرز
- ایک ڈیش بورڈ ایگریگیٹر نوڈ
- اسٹیٹس کوائف سروس
- کسٹم میسج ہینڈلنگ

## سسٹم معماری

```
┌──────────────┐     /robot_1/status     ┌──────────────┐
│  روبوٹ 1     │ ─────────────────────▶  │              │
│  اسٹیٹس نوڈ  │                         │   ڈیش بورڈ  │
└──────────────┘                         │   نوڈ        │
                                         │              │
┌──────────────┐     /robot_2/status     │   سبسکرائب  │
│  روبوٹ 2     │ ─────────────────────▶  │   تمام       │
│  اسٹیٹس نوڈ  │                         │   روبوٹس     │
└──────────────┘                         │              │
                                         │   فراہم کرتا  │
┌──────────────┐     /robot_3/status     │   /query_     │
│  روبوٹ 3     │ ─────────────────────▶  │   اسٹیٹس     │
│  اسٹیٹس نوڈ  │                         │   سروس       │
└──────────────┘                         └──────────────┘
```

## ضروریات

### 1. روبوٹ اسٹیٹس نوڈ

ہر روبوٹ 1 Hz پر اسٹیٹس شائع کرتا ہے:

```python
# میسج مواد (std_msgs/String کا JSON کے ساتھ استعمال کریں)
{
    "robot_id": "robot_1",
    "status": "active",      # active, idle, error
    "battery": 85,           # 0-100
    "position": {"x": 1.5, "y": 2.0},
    "timestamp": "2024-01-15T10:30:00"
}
```

ضروریات:

- robot_id کو ROS پیرامیٹر کے طور پر قبول کریں
- بیٹری کی کمی کی شبیہہ (ہر 10 سیکنڈ میں 1% کم)
- جب بیٹری < 20% ہو تو اسٹیٹس کو "error" میں تبدیل کریں

### 2. ڈیش بورڈ نوڈ

تمام روبوٹ اسٹیٹس ایگریگیٹ کرتا ہے:

ضروریات:

- `/robot_*/status` کو سبسکرائب کریں (وائلڈ کارڈ یا متعدد سبسکرپشنز استعمال کریں)
- ہر روبوٹ کے لیے تازہ ترین اسٹیٹس کا ڈکشنری برقرار رکھیں
- ہر 5 سیکنڈ میں خلاصہ لاگ کریں
- 10+ سیکنڈ سے رپورٹ نہ کرنے والے روبوٹس کو ڈیٹیکٹ کریں ("offline" کے طور پر نشان زد کریں)

### 3. کوائف سروس

انفرادی روبوٹ اسٹیٹس کوائف کے لیے سروس:

```python
# ریکویسٹ
robot_id: "robot_1"

# ریسپانس
found: True
status_json: "{ ... مکمل اسٹیٹس JSON ... }"
```

## شروع کریں

### پیکج سیٹ اپ

```bash
cd ~/ros2_ws/src
ros2 pkg create --build-type ament_python robot_talker \
    --dependencies rclpy std_msgs std_srvs
```

### اسٹارٹر فائلز

`starter/` ڈائریکٹری میں اسٹارٹر کوڈ استعمال کریں:

- `robot_node.py` - روبوٹ اسٹیٹس پبلشر ٹیمپلیٹ
- `dashboard_node.py` - ڈیش بورڈ سبسکرائبر ٹیمپلیٹ
- `query_service.py` - اسٹیٹس کوائف سروس ٹیمپلیٹ

### سسٹم چلانا

```bash
# ٹرمنل 1: 3 روبوٹس لانچ کریں
ros2 run robot_talker robot_node --ros-args -p robot_id:=robot_1
ros2 run robot_talker robot_node --ros-args -p robot_id:=robot_2
ros2 run robot_talker robot_node --ros-args -p robot_id:=robot_3

# ٹرمنل 2: ڈیش بورڈ
ros2 run robot_talker dashboard_node

# ٹرمنل 3: کوائف
ros2 service call /query_status robot_talker/srv/QueryStatus "{robot_id: 'robot_1'}"
```

## جائزہ کے معیار

| معیار | پوائنٹس |
|-----------|--------|
| روبوٹ نوڈز صحیح فارمیٹ شائع کرتے ہیں | 20 |
| ڈیش بورڈ تمام روبوٹس ایگریگیٹ کرتا ہے | 20 |
| آف لائن ڈیٹیکشن کام کرتا ہے | 15 |
| کوائف سروس صحیح ڈیٹا لوٹاتی ہے | 20 |
| صاف کوڈ اور غلطی کا انتظام | 15 |
| دستاویزات/تبصرے | 10 |
| **کل** | **100** |

## توسیعات (بونس)

1. **لانچ فائل**: تمام نوڈز شروع کرنے کے لیے لانچ فائل بنائیں
2. **کسٹم میسج**: JSON سٹرنگز کے بجائے `RobotStatus.msg` کی وضاحت کریں
3. **ایکشن سرور**: "چارجنگ اسٹیشن پر روبوٹ بھیجنے" کے لیے ایکشن شامل کریں
4. **وژولائزیشن**: ڈیش بورڈ کے لیے سادہ ٹرمنل UI بنائیں
5. **میلٹی مشین**: مختلف مشینز پر روبوٹس چلائیں (ROS_DOMAIN_ID کا استعمال کریں)

## اشارے

- میسج سیریلائزیشن کے لیے `json.dumps()` اور `json.loads()` استعمال کریں
- ROS پیرامیٹرز کے لیے `self.declare_parameter()` استعمال کریں
- ٹائم سٹیمپس کے لیے `time.time()` (ISO فارمیٹ میں تبدیل کریں)
- اسٹیٹس ایگریگیشن کے لیے ڈکشنری کمپری ہینشن

## حل

مکمل نفاذ کے لیے `solution/` ڈائریکٹری دیکھیں.

## ریفلیکشن سوالات

1. روبوٹ اسٹیٹس کے لیے سروسز کے بجائے ٹاپکس کیوں استعمال کریں؟
2. اگر ڈیش بورڈ نوڈ کریش ہو جائے اور دوبارہ شروع ہو تو کیا ہوتا ہے؟
3. آپ اسے 100 روبوٹس تک کیسے اسکیل کریں گے؟
4. قابل اعتمادی کو بہتر بنانے کے لیے کون سی QoS سیٹنگز کام آئیں گی؟